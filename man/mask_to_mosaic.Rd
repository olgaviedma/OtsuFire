% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/1_2_mask_to_mosaic.R
\name{mask_to_mosaic}
\alias{mask_to_mosaic}
\title{Apply a Binary Raster Mask (and Optional Geographic Clip) to a Two-Band Mosaic}
\usage{
mask_to_mosaic(
  mosaic_path,
  mask_raster_path,
  output_path = NULL,
  valid_mask_value = 1,
  crs_target = 3035,
  shapefile_clip = NULL
)
}
\arguments{
\item{mosaic_path}{Character. Path to the input 2-band raster mosaic (e.g. with RBR and DOY).}

\item{mask_raster_path}{Character. Path to the binary mask raster (e.g. burnable areas).}

\item{output_path}{Character (optional). Full path to save the masked output. If NULL, the output
is saved in the same folder as the input mosaic, with suffix `_mosaic_masked_res90m.tif`.}

\item{valid_mask_value}{Numeric. Value in the mask that defines valid pixels (default is 1).}

\item{crs_target}{Integer or character. EPSG code for reprojection (only used if needed). Default: 3035.}

\item{shapefile_clip}{Character (optional). Path to a shapefile to further crop and mask the mosaic.}
}
\value{
Character. Path to the final masked (and optionally clipped) raster.
}
\description{
This function applies a binary raster mask to a 2-band burned area mosaic (RBR and DOY).
All pixels in the mosaic where the mask does not match `valid_mask_value` are assigned `NA`.
Optionally, a shapefile can be provided to crop and mask the mosaic to a specific geographic area
(e.g., the Iberian Peninsula).

The function ensures that the mask raster is projected and aligned to the mosaic before applying.
The output is saved with the same resolution as the input mosaic.
}
\details{
This function is commonly used after mosaicking burned area products derived from satellite imagery.
It filters areas outside a burnable mask (e.g., based on land cover) and optionally restricts output
to a defined geographic region (e.g., Iberian Peninsula).

It assumes input mosaics contain:
- Band 1: Relative Burn Ratio (RBR)
- Band 2: Day of Year (DOY)
}
\examples{
\dontrun{
mask_to_mosaic(
  mosaic_path = "data/IBERIAN_MinMin_all_year_2012_mosaic_res90m.tif",
  mask_raster_path = "data/burneable_mask_corine_ETRS89.tif",
  shapefile_clip = "data/iberian_boundary.shp"
)
}

}
